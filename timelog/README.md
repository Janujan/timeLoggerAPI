# TimeLogger API

# Table of Contents
1. [Purpose] (#purpose)
2. [Prerequisites] (#prereqs)
3. [Routes]  (#routes)

## Purpose <a name="purpose">

I made this project to help keep better track of where my time was being spent. This api keeps track of activites submitted with features like tagging activites to be able to bin activities. I want to be able to generate reports and adjust my schedule based on the information collected.

From a technical standpoint, I made this API to build a reliable RESTful API that also supports secure connections via JWT.

The technologies that I got to touch upon are as follows:
- Spring/Hibernate/MySQL
- Spring Security and JWT

## Prerequisites <a name="prereqs">
- Spring 2.2.5
- MySQL Server

## Routes <a name="routes">

### /users
|Route   	|Methods   	|Description   	
 ---	| ---	| ---	
| **/register**   	|  `POST` 	| Register a new user by passing in a user object  	|
| **/authenticate**   	|`POST`   	|Pass in user credentials to obtain JWT(username and password only)   	|

### /logs
|Route   	|Methods   	|Description   	
 ---	| ---	| ---	
| **/submit**   	|  `POST` 	| Add a new log by passing in a log object 	|
| **/**   	|`GET`  	|Get a list of all logs you've submitted   	|
| **/{:id}**   	|`GET`, `POST`, `DELETE`    	|Make changes to the log id provided. You can either retrive the log, update the log or delete the log.	|

## Log Model

Variable | type |
---|---|
id* | long |
task | string |
description | string | 
tag | string | 
duration | double

## User Model

| Variable | Type |
---| ---|
id* | long |
username | string |
password | string | 
email | string |
user* | User

*Note: Variables marked with * are generated by the application and not provided by the user.*

## OAuth2.0 Workflow

As a user, the process needed to obtain a token to access the routes are as follows:
- Register a user under the /user/register/ route by passing in a User object.
- Once the user has been created, obtain a token from the /user/authenticate endpoint.
- Provide the token in your request header as "Bearer {token}"


## Installation 
1. Clone this repo
2. Create an application.properties file under `src/main/resources/application.properties`

    Copy and paste the following information in the file for the MySQL Database configuration:
    ```
    spring.jpa.hibernate.ddl-auto=update
    spring.datasource.url=jdbc:mysql://localhost:3306/time_log?useUnicode=true&useJDBCCompliantTimezoneShift=true&useLegacyDatetimeCode=false&serverTimezone=UTC
    spring.datasource.username={user}
    spring.datasource.password={password}
    ```
3. Create a SecurityConstraints.java class under `src/main/java/com/timelog/timelog/services/SecurityConstants.java`
    Copy and paste the following information in the file for the encryption secret:
    ```
    package com.timelog.timelog.services;

    import org.springframework.stereotype.Service;

    @Service
    public class SecurityConstants {

        public String tokenSecret = "SECRET";
        
    }
    ```
4. Build the package with: ./mvnw package clean
5. Run the application with ./mvnw spring-boot:run



## Next Steps
- Generate a tags endpoint to retrieve used tags
- Report generation